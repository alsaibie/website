---
import { getTranslation } from "../../data/i18n";

export interface Publication {
  authors: string;
  title: string;
  venue: string;
  year: number;
  pages?: string;
  location?: string;
  doi?: string;
  url?: string;
}

export interface PublicationCategory {
  title: string;
  publications: Publication[];
}

export interface Props {
  categories: PublicationCategory[];
  language?: string;
}

const { categories, language = "en" } = Astro.props;
const t = getTranslation(language);

// Function to get background color based on category type
function getCategoryColor(categoryTitle: string): string {
  const title = categoryTitle.toLowerCase();
  if (title.includes('conference')) {
    return 'bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800/30';
  } else if (title.includes('journal')) {
    return 'bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800/30';
  } else {
    return 'bg-black/5 dark:bg-white/5 border-black/10 dark:border-white/20';
  }
}
---

<section class="animate space-y-4" dir="ltr">
  <h2 class="text-2xl font-bold text-black dark:text-white border-b border-black/10 dark:border-white/20 pb-2">
    {t.publications}
  </h2>
  
  {categories.map((category) => (
    <div class="space-y-4">
      <h3 class="text-lg font-semibold text-black/80 dark:text-white/80">{category.title}</h3>
      <div class="space-y-3">
        {category.publications.map((pub) => (
          <div class={`rounded border p-4 transition-colors hover:shadow-sm ${getCategoryColor(category.title)} text-left`} dir="ltr">
            <p class="text-sm">
              {pub.authors} ({pub.year}). 
              "{pub.title}" 
              <em>{pub.venue}</em>
              {pub.pages && `, ${pub.pages}`}
              {pub.location && `, ${pub.location}`}.
              {pub.doi && (
                <a href={pub.url || `https://doi.org/${pub.doi}`} class="text-blue-600 dark:text-blue-400 hover:underline ml-2">
                  DOI
                </a>
              )}
            </p>
          </div>
        ))}
      </div>
    </div>
  ))}
</section>
