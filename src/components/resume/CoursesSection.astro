---
import { getTranslation } from "../../data/i18n";

export interface Course {
  code: string;
  title: string;
  semester: string;
  credits?: number;
  description?: string;
}

export interface CourseCategory {
  category: string;
  items: Course[];
}

export interface Props {
  courses: CourseCategory[];
  language?: string;
}

const { courses, language = "en" } = Astro.props;
const t = getTranslation(language);
---

<section class="space-y-6" dir="ltr">
  <h2 class="text-2xl font-semibold text-black dark:text-white border-b border-black/10 dark:border-white/25 pb-2">
    {t.teachingExperience}
  </h2>
  
  <div class="space-y-8">
    {courses.map((category) => (
      <div class="space-y-4">
        <h3 class={`text-lg font-medium text-black/80 dark:text-white/80 ${language === 'ar' ? 'border-r-4 border-purple-500/50 pr-4 text-right' : 'border-l-4 border-purple-500/50 pl-4 text-left'}`} dir={language === 'ar' ? 'rtl' : 'ltr'}>
          {category.category}
        </h3>
        
        <div class="grid gap-3">
          {category.items.map((course) => (
            <div class="bg-black/5 dark:bg-white/5 rounded px-4 py-3 border border-black/10 dark:border-white/10 text-left" dir="ltr">
              <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-1">
                <div class="flex-1">
                  <h4 class="font-semibold text-black/90 dark:text-white/90 mb-1">
                    {course.code} {course.title}
                  </h4>
                </div>
                <div class="text-xs text-black/60 dark:text-white/60">
                  <span>{course.semester}</span>
                </div>
              </div>
              
              {course.description && (
                <div class={`text-black/70 dark:text-white/70 text-xs leading-relaxed ${language === 'ar' ? 'text-right' : 'text-left'}`} dir={language === 'ar' ? 'rtl' : 'ltr'}>
                  {course.description.includes('http') ? (
                    <span>
                      {course.description.split(/(https?:\/\/[^\s]+)/g).map((part, index) => 
                        part.match(/^https?:\/\//) ? (
                          <a 
                            href={part} 
                            target="_blank" 
                            rel="noopener noreferrer"
                            class="text-blue-600 dark:text-blue-400 hover:underline"
                          >
                            {part}
                          </a>
                        ) : (
                          <span>{part}</span>
                        )
                      )}
                    </span>
                  ) : (
                    <span>{course.description}</span>
                  )}
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    ))}
  </div>
</section>
